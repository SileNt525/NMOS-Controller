# Roo Code NMOS控制软件用户指南

## 概述

Roo Code是一个基于NMOS标准的控制系统，用于IP广播设备的路由控制。它支持NMOS IS-04、05、07、08标准，提供设备发现、注册、连接管理、事件触发路由控制和音频通道映射功能。

## 安装和部署

### 前提条件

- Python 3.8或更高版本（用于后端服务）
- Node.js 14或更高版本和npm（用于前端Web UI）
- Docker（可选，用于容器化部署）

### 安装步骤

1. **克隆代码库**：
   ```
   git clone https://github.com/your-repo/roo-code.git
   cd roo-code
   ```

2. **安装后端依赖**：
   ```
   cd backend
   pip install -r requirements.txt
   ```

3. **安装前端依赖**：
   ```
   cd frontend
   npm install
   ```

4. **数据库初始化**：
   - 参考`database/README.md`文件中的说明，初始化数据库。

5. **启动服务**：
   - 启动后端服务：
     ```
     cd backend
     python nmos_registry_service/main.py
     python connection_management_service/main.py
     python event_handling_service/main.py
     python audio_mapping_service/main.py
     ```
   - 启动前端Web UI：
     ```
     cd frontend
     npm start
     ```

### 使用Docker部署

参考`DEPLOYMENT_GUIDE.md`文件中的说明，使用Docker和Docker Compose进行部署。

## 使用指南

### 登录

访问Web UI（默认地址：`http://localhost:3000`），使用您的凭据登录。系统支持不同的角色（管理员、操作员、查看者），每个角色具有不同的权限。

### 设备管理

- **发现设备**：在“设备”页面查看通过IS-04发现的所有设备。
- **设备详情**：点击设备查看详细信息，如发送器和接收器。

### 连接管理

- **手动路由**：在“连接”页面选择发送器和接收器，点击“连接”按钮建立即时IS-05连接。
- **批量连接**：上传包含多个连接请求的CSV文件，进行批量连接操作。
- **延迟激活**：设置未来的激活时间，进行延迟连接激活。

### 事件管理

- **事件触发路由**：在“事件”页面配置事件触发器，设置基于事件的路由控制（IS-07）。

### 音频通道映射

- **通道映射**：在“音频映射”页面选择支持IS-08的设备，执行音频通道操作，如静音、交换和重新路由。

### 网络拓扑

- **拓扑视图**：在“网络拓扑”页面查看设备和节点之间的连接图。使用缩放按钮调整视图。

### 仪表板

- **状态概览**：在“仪表板”页面查看系统状态和关键指标。

## 高级功能

- **自定义视图**：在Web UI中自定义您的仪表板视图，保存您的偏好。
- **高级搜索和过滤**：使用高级搜索和过滤选项快速找到特定设备、连接或事件。

## 安全功能

Roo Code遵循AMWA BCP-003安全最佳实践，实施了基于角色的访问控制（RBAC）。有关详细信息，请参考系统管理员。

## 需要改进的方面

基于代码审阅，以下是一些需要改进的方面：
- **前端**：登录后数据初始化逻辑未完全实现，可能导致用户登录后看到不完整的数据。
- **后端**：WebSocket连接关闭后重连逻辑未完全实现，可能导致服务中断后无法自动恢复。

## 故障排除

- **日志**：检查后端服务日志以获取错误信息。
- **常见问题**：参考FAQ部分解决常见问题。

## 开发者指南

### API文档

Roo Code提供RESTful API用于集成。API端点文档可以在以下位置找到：
- NMOS注册服务：`http://localhost:8000/docs`
- 连接管理服务：`http://localhost:8001/docs`
- 事件处理服务：`http://localhost:8002/docs`
- 音频映射服务：`http://localhost:8003/docs`

### 扩展系统

开发者可以扩展系统功能，方法是：
1. 添加新的后端服务模块。
2. 在前端Web UI中创建新的组件和页面。
3. 实现自定义事件触发器和处理程序。

## 支持和反馈

如需支持或提供反馈，请联系系统管理员或在GitHub上提交问题。

---
最后更新：2025年5月12日